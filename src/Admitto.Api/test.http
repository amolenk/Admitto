#@ticketedEventId = f02fd7d4-7c12-a18a-a31d-e9448d62c433
#@ticketTypeId = 705e564e-be64-77a2-b552-2fcb19506385

### Get Keycloak token

POST http://localhost:8080/realms/admitto/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type=password&client_id=admitto-test-runner&username=alice&password=alice

> {% client.global.set("accessToken", response.body.access_token); %}

### Create a new team

POST http://localhost:5100/teams/v1
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "name": "Acme",
  "emailSettings": {
    "senderEmail": "no-reply@example.com",
    "smtpServer": "smtp.example.com",
    "smtpPort": 587
  },
  "members": [
    { "email": "bob@example.com", "role": "manager" }
  ]
}

### Create a new event

@teamId = d86c0337-74f9-336d-5038-eca92f8a73ae

POST http://localhost:5100/events/v1
Content-Type: application/json

{
  "name": "AwesomeCon",
  "startTime": "2050-01-24T09:00:00Z",
  "endDay": "2050-01-25T16:00:00Z",
  "salesStartTime": "2049-09-01T00:00:00Z",
  "salesEndTime": "2050-01-23T18:00:00Z",
  "ticketTypes": [
    {
      "name": "General Admission",
      "slotName": "Default",
      "maxCapacity": 100
    }
  ]
}




###

#@teamId = e8ad4949-1d2a-ae04-c763-336dea584a5f

POST http://localhost:5100/events/v1/{{teamId}}/members
Content-Type: application/json

{
  "email": "a.molenkamp@gmail.com",
  "role": "GlobalAdmin"
}

###

GET http://localhost:5100/teams/{{teamId}}/events/{{ticketedEventId}}



###

GET http://localhost:5100/events/{{ticketedEventId}}

###

POST http://localhost:5100/registrations
Content-Type: application/json

{
  "email": "a.molenkamp@gmail.com",
  "firstName": "Sander",
  "lastName": "Molenkamp",
  "organizationName": "Info Support",
  "ticketedEventId": "{{ticketedEventId}}",
  "ticketTypes": [
    "{{ticketTypeId}}"
  ]
}

###

POST http://localhost:5100/teams/{{teamId}}/events/
Content-Type: application/json

{
}

